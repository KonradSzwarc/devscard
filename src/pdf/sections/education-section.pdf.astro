---
import type { EducationSection } from '@/types/education-section';
import type { I18n } from '@/types/i18n';
import getDateFormatter from '@/utils/date-formatter';
import DashedDivider from '../components/dashed-divider.astro';
import SectionHeading from '../components/section-heading.astro';

export interface Props extends EducationSection {
  i18n: I18n;
}

const {
  config: { title },
  educationItems,
  i18n,
} = Astro.props;

const getFormattedDate = getDateFormatter(i18n.locale);
---

<div>
  <SectionHeading>{title}</SectionHeading>
  <div class="flex flex-col">
    {
      educationItems.map((eduItem) => () => (
        <>
          <div class="flex flex-col gap-1.5">
            <div>
              <div class="flex items-center justify-between">
                <div class="flex gap-1 text-xl font-extrabold text-gray-900">{eduItem.title}</div>
                <div class="flex h-6 w-fit items-center rounded bg-gray-800 px-2.5 text-sm font-medium text-white">
                  {getFormattedDate(eduItem.startDate)} -{' '}
                  {eduItem.endDate ? getFormattedDate(eduItem.endDate) : i18n.translations.now}
                </div>
              </div>
              <div class="text-lg font-medium text-gray-700">{eduItem.institution}</div>
            </div>
            <div class="text-base font-normal text-gray-500">
              {Array.isArray(eduItem.description) ? (
                <ul class="list-disc pl-4">
                  {eduItem.description.map((line) => (
                    <li>{line}</li>
                  ))}
                </ul>
              ) : (
                <div class="text-justify">{eduItem.description}</div>
              )}
            </div>
          </div>
          <DashedDivider />
        </>
      ))
    }
  </div>
</div>
