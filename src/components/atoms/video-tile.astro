---
import { Image } from '@astrojs/image/components';

import Typography from '@/atoms/typography.astro';
import type { Video } from '@/types/favorites-section';

export interface Props extends astroHTML.JSX.HTMLAttributes {
  value: Video;
}

const { value, ...props } = Astro.props;
const VideoTile = 'a';

const getVideoThumbnail = (url: string) => {
  return `https://img.youtube.com/vi/${url.split('/').pop()}/0.jpg`;
};

const imageSizes = {
  width: '277.33px',
  height: '156px',
};
---

<VideoTile
  href={value.url}
  class:list={[
    'flex',
    'flex-col',
    'gap-3',
    `w-[${imageSizes.width}]`,
    'transition',
    'duration-300',
    'hover:translate-y-2',
    props.class,
  ]}
>
  <Image
    class:list={['rounded-lg', 'shadow-md', 'object-cover', `w-[${imageSizes.width}]`, `h-[${imageSizes.height}]`]}
    src={getVideoThumbnail(value.url)}
    height="auto"
    aspectRatio="1.67"
    alt={value.title}
    format="webp"
  />
  <div class:list={['tile-content', 'gap-1']}>
    <Typography class:list={['leading-5', 'hover:text-gray-900']} variant="tile-title">
      {value.title}
    </Typography>
  </div>
</VideoTile>
